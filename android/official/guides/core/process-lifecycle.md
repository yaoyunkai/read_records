# 进程和应用生命周期 #

在大多数情况下，每个 Android 应用都在各自的 Linux 进程中运行。当需要运行应用的一些代码时，系统会为应用创建此进程，并使其保持运行，直到不再需要它且系统需要回收其内存以供其他应用使用。

应用开发者必须了解不同的应用组件（特别是 `Activity`、`Service` 和 `BroadcastReceiver`）对应用进程的生命周期有何影响.

为了确定在内存不足时应该终止哪些进程，Android 会根据每个进程中运行的组件以及这些组件的状态，将它们放入“重要性层次结构”。这些进程类型包括（按重要性排序）：

1. **前台进程**是用户目前执行操作所需的进程。如果以下任一条件成立，则进程会被认为位于前台：
   - 它正在用户的互动屏幕上运行一个 `Activity`（其 `onResume()` 方法已被调用）。
   - 它有一个 `BroadcastReceiver` 目前正在运行（其 `BroadcastReceiver.onReceive()` 方法正在执行）。
   - 它有一个 `Service` 目前正在执行其某个回调（`Service.onCreate()`、`Service.onStart()` 或 `Service.onDestroy()`）中的代码。
1. **可见进程**正在进行用户当前知晓的任务，因此终止该进程会对用户体验造成明显的负面影响。
1. **服务流程**包含一个已使用 `startService()` 方法启动的 `Service`。
1. **缓存进程**是目前不需要的进程，因此，如果其他地方需要内存，系统可以根据需要自由地终止该进程。在正常运行的系统中，这些是内存管理中涉及的唯一进程：运行良好的系统将始终有多个缓存进程可用（为了更高效地切换应用），并根据需要定期终止最早的进程。只有在非常危急（且具有不良影响）的情况下，系统中的所有缓存进程才会被终止，此时系统必须开始终止服务进程。

